var __extends=this&&this.__extends||function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();HTMLElement.prototype.apply=function(t){return t(this),this},HTMLElement.prototype.let=function(t){return t(this)},Number.prototype.isInteger=function(){return"number"==typeof this&&isFinite(this)&&Math.floor(this)===this},Number.prototype.toPaddedString=function(t){var n=this.toString();return"0".repeat(t-n.length)+n},String.prototype.endsWith=function(t){return this.substr(this.length-t.length)==t},String.prototype.repeat=function(t){if(t<1||!t.isInteger())return"";for(var n=this,e=0;++e<t;)n+=n;return n},String.prototype.startsWith=function(t){return this.substr(0,t.length)==t};var Factory=function(){function t(){}return t.a=function(t){return void 0===t&&(t=function(){return null}),document.createElement("a").apply(function(n){return t(n)})},t.br=function(){return document.createElement("br")},t.div=function(t){return void 0===t&&(t=function(){return null}),document.createElement("div").apply(function(n){return t(n)})},t.form=function(t){return void 0===t&&(t=function(){return null}),document.createElement("form").apply(function(n){return t(n)})},t.h=function(t,n,e){return void 0===e&&(e=function(){return null}),t<1&&(t=1),t>6&&(t=6),document.createElement("h"+t).apply(function(t){t.innerHTML=n,e(t)})},t.img=function(t,n){return void 0===n&&(n=function(){return null}),document.createElement("img").apply(function(e){e.src=t,n(e)})},t.input=function(t,n){return void 0===t&&(t="text"),void 0===n&&(n=function(){return null}),document.createElement("input").apply(function(e){e.type=t,n(e)})},t.li=function(t){return void 0===t&&(t=function(){return null}),document.createElement("li").apply(function(n){return t(n)})},t.span=function(t){return void 0===t&&(t=function(){return null}),document.createElement("span").apply(function(n){return t(n)})},t.table=function(t,n){return void 0===t&&(t=function(){return null}),void 0===n&&(n=function(){return null}),document.createElement("table").apply(function(e){n(e),e.appendChild(e.createTBody().apply(function(n){return t(n)}))})},t.td=function(t){return void 0===t&&(t=function(){return null}),document.createElement("td").apply(function(n){return t(n)})},t.text=function(t,n){return void 0===n&&(n=function(){return null}),document.createElement("text").apply(function(e){e.innerHTML=t,n(e)})},t.textarea=function(t){return void 0===t&&(t=function(){return null}),document.createElement("textarea").apply(function(n){return t(n)})},t.tr=function(t){return void 0===t&&(t=function(){return null}),document.createElement("tr").apply(function(n){return t(n)})},t.ul=function(t){return void 0===t&&(t=function(){return null}),document.createElement("ul").apply(function(n){return t(n)})},t}(),HashMap=function(){function t(){this.data={}}return t.prototype.clear=function(){this.data={}},t.prototype.containsKey=function(t){return this.data.hasOwnProperty(t)},t.prototype.get=function(t){return this.data[t]},t.prototype.put=function(t,n){this.data[t]=n},t.prototype.remove=function(t){return!!this.data.hasOwnProperty(t)&&(delete this.data[t],!0)},t.prototype.toArray=function(t){for(var n=[],e=Object.keys(this.data),r=0;r<e.length;r++)n.push(t(e[r],this.data[e[r]]));return n},t}(),Integer=function(t){function n(n){if(!n.isInteger())throw new TypeError("Value must be an integer!");return t.call(this,n)||this}return __extends(n,t),n}(Number),mutationData=function(){var t=[];return new MutationObserver(function(n,e){n.forEach(function(n){"childList"===n.type&&n.addedNodes.length&&n.addedNodes.forEach(function(n){t.forEach(function(t){t.id==n.id&&t.logic(document.getElementById(t.id))})})})}).observe(document.getElementById("container"),{attributes:!1,childList:!0,subtree:!1}),{onElementAdd:function(n,e){t.push({id:n,logic:e})}}}(),calloutCreate=function(t,n,e){void 0===e&&(e=[]);var r=!0,o=null,i=document.getElementById("container").appendChild(Factory.div(function(u){o=function(){r=!1,i.remove()},u.className="extensionCallout small",u.setAttribute("style","left: 70px; top: 170px;"),u.appendChild(Factory.ul(function(r){var i=function(t,n,e,i){r.appendChild(Factory.li(function(r){r.className="accordionItem";var u=Factory.div(function(t){t.className="accordionContent",t.innerHTML=n});r.appendChild(Factory.a(function(n){n.className="accordionTitle active",n.setAttribute("style","cursor: default;"),n.innerHTML=t,e&&n.appendChild(Factory.span(function(t){t.className="indicator",t.style.backgroundPosition="0 -18px",t.addEventListener("click",o),t.addEventListener("mousedown",function(t){return t.stopPropagation()})})),i&&n.appendChild(Factory.span(function(t){t.className="indicator",t.addEventListener("click",function(){n.className.indexOf("active")>-1?(u.style.display="none",n.className="accordionTitle"):(u.style.display="block",n.className="accordionTitle active")}),t.addEventListener("mousedown",function(t){return t.stopPropagation()})}))})),r.appendChild(u)}))};i(t,n,!0,!1),e.forEach(function(t){i(t.title,t.content,!1,t.shrinkable)})}))}));return{isActive:function(){return r},close:o}},optionCallout=function(){var t=null,n=function(){return null!==t&&t.isActive()};return{isActive:n,show:function(){n()||(t=calloutCreate("Extension Options","CONTENT GOES HERE",[{title:"About",content:"Version 0.1",shrinkable:!0}]))}}}(),viewType=window.location.href.match(/view=[a-z]+/)[0].split("=")[1];if(document.getElementById("container").appendChild(Factory.div(function(t){t.className="extensionBanner",t.appendChild(Factory.span(function(t){t.innerHTML="Extension"})),t.appendChild(Factory.span(function(t){t.innerHTML="&nbsp;&gt;&nbsp;"})),t.appendChild(Factory.span(function(t){t.className="link",t.innerHTML="Options",t.addEventListener("click",function(){optionCallout.show()})}))})),document.getElementById("eventDiv").style.display="none","city"==viewType&&(document.getElementById("mapControls").remove(),document.getElementById("js_toggleControlsOn").style.cursor="default"),"island"==viewType){var resourceUpdate=function(){document.getElementById("setWorkersBox").getElementsByClassName("content")[0].apply(function(t){t.setAttribute("style","min-height: 0px;"),t.getElementsByClassName("premiumOfferBox")[0].remove()})};mutationData.onElementAdd("resource",resourceUpdate),mutationData.onElementAdd("tradegood",resourceUpdate),mutationData.onElementAdd("barbarianVillage",function(t){var n=["js_islandBarbarianResourceresource","js_islandBarbarianResourcetradegood1","js_islandBarbarianResourcetradegood2","js_islandBarbarianResourcetradegood3","js_islandBarbarianResourcetradegood4"].reduce(function(t,n){return t+parseInt(document.getElementById(n).innerHTML)},0),e=Math.ceil(n/500);document.getElementsByClassName("barbarianCityInfos")[0].setAttribute("style","height: 220px;"),document.getElementsByClassName("barbarianCityResources")[0].apply(function(t){t.appendChild(Factory.br()),t.appendChild(Factory.div(function(t){t.innerHTML="Resource Transport:"})),t.appendChild(Factory.ul(function(t){t.className="resources",t.setAttribute("style","height: 25px;"),t.appendChild(Factory.li(function(t){t.setAttribute("style",'background: url("skin/wonder/multi_marble.png") no-repeat left center;'),t.innerHTML=n.toString()})),t.appendChild(Factory.li(function(t){t.setAttribute("style",'background: url("skin/characters/fleet/40x40/ship_transport_r_40x40.png") no-repeat left center; background-size: 20px;'),t.innerHTML=e.toString()}))}))})})}